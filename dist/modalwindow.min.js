!function(){var t={366:function(){}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";s(366);s.g.ModalWindow=class{constructor(t,e){this.options=Object.assign({isOpen:()=>{},isClose:()=>{},speed:300,classNames:{modal:"modal",window:"modal__window",show:"show",active:"active"},dataAttributes:{overlay:"data-modal-overlay",modal:"data-modal-btn",window:"data-modal-window",btnClose:"data-modal-close",fixBlock:"data-modal-fix"}},e),this.modalBtns=document?.querySelectorAll(t),this.modal=document?.querySelector(`[${this.options.dataAttributes.overlay}]`),this.windows=this.modal?.querySelectorAll(`.${this.options.classNames.window}`),this.html=document.documentElement,this.body=document.body,this.modalCloseBtns=this.modal?.querySelectorAll(`[${this.options.dataAttributes.btnClose}]`),this.previusActiveBtn=null,this.modalFocusableElements=null,this.documentFocusableElements=null,this.focusElements=["a[href]","input","select","textarea","button","iframe","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.events()}events(){document.addEventListener("DOMContentLoaded",(()=>{this.modalInit(),this.modalBtns?.forEach((t=>{t?.addEventListener("click",(()=>{const{currSpeed:e}=this.getParamsModal();(new Date).getTime()-this.lastClick<e+15||(this.lastClick=(new Date).getTime(),this.modal?.classList.contains(this.options.classNames.show)?this.reOpenModal(t,e):this.openModal(t))}))})),this.modal?.addEventListener("click",(t=>{if(t.target==t.currentTarget){const{currSpeed:t}=this.getParamsModal();if((new Date).getTime()-this.lastClick<t+15)return;this.lastClick=(new Date).getTime(),this.closeModal()}})),this.modalCloseBtns?.forEach((t=>{t?.addEventListener("click",(()=>{const{currSpeed:t}=this.getParamsModal();(new Date).getTime()-this.lastClick<t+15||(this.lastClick=(new Date).getTime(),this.closeModal())}))})),document.addEventListener("keydown",(t=>{if("Escape"===t.code){const{currSpeed:t}=this.getParamsModal();if((new Date).getTime()-this.lastClick<t+15)return;this.lastClick=(new Date).getTime(),this.closeModal()}this.modal?.classList.contains(this.options.classNames.show)&&this.focusMoving(t)}))}))}modalInit(){this.windows?.forEach((t=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-hidden","true")}))}openModal(t){const e=t.dataset.modalSpeed||this.options.speed;this.modal.style.setProperty("--modal-time",e/1e3+"s"),this.modal?.classList.add(this.options.classNames.show);const s=this.modal?.querySelector(`[${this.options.dataAttributes.window}="${t.dataset.modalBtn||t.dataset.modalWindow}"]`),o=this.modal?.querySelector(`.${this.options.classNames.window}.${this.options.classNames.active}`);o?this.reOpenModal(t,e):(s.classList.add(this.options.classNames.show),setTimeout((()=>{s.classList.add(this.options.classNames.active)})),this.disableScroll(),this.tabindexOff(),this.focusToModal(s,e),this.openModalA11y(s),this.options.isOpen(this))}closeModal(t){const{currSpeed:e}=this.getParamsModal();t||this.modal?.classList.remove(this.options.classNames.show);const s=this.modal?.querySelector(`.${this.options.classNames.window}.${this.options.classNames.active}`);s?.classList.remove(this.options.classNames.active),setTimeout((()=>{s?.classList.remove(this.options.classNames.show),this.enableScroll()}),e),this.focusToBtn(),this.closeModalA11y(s),this.options.isClose(this)}reOpenModal(t,e){this.closeModal(t),this.tabindexOff(),setTimeout((()=>{this.openModal(t)}),e)}openModalA11y(t){t?.setAttribute("aria-hidden","false")}closeModalA11y(t){t?.setAttribute("aria-hidden","true")}disableScroll(){const t=document?.querySelectorAll(`[${this.options.dataAttributes.fixBlock}]`),e=window.scrollY,s=window.innerWidth-this.body.offsetWidth+"px";this.html.style.scrollBehavior="none",t.forEach((t=>{t.style.paddingRight=s})),this.body.style.paddingRight=s,this.body.classList.add("dis-scroll"),this.body.dataset.position=e,this.body.style.top=`-${e}px`}enableScroll(){const t=document?.querySelectorAll(`[${this.options.dataAttributes.fixBlock}]`),e=parseInt(this.body.dataset.position,10);t.forEach((t=>{t.style.paddingRight="0px"})),this.body.style.paddingRight="0px",this.body.style.top="auto",this.body.classList.remove("dis-scroll"),window.scroll({top:e,left:0}),this.body.removeAttribute("data-position")}getParamsModal(){return{currSpeed:1e3*parseFloat(getComputedStyle(this.modal).getPropertyValue("--modal-time"))}}focusToModal(t,e){this.modalFocusableElements=Array.from(t.querySelectorAll(this.focusElements)),this.documentFocusableElements=Array.from(document.querySelectorAll(this.focusElements)),this.previusActiveBtn=document.activeElement,this.tabindexOff(),setTimeout((()=>{this.modalFocusableElements[0]?.focus()}),e)}focusMoving(t){const e=this.modalFocusableElements.indexOf(document.activeElement);!t.shiftKey&&"Enter"!==t.key&&" "!==t.key&&["Escape","Tab"].includes(t.key)&&e===this.modalFocusableElements.length-1&&this.modalFocusableElements.length>0&&(this.modalFocusableElements[0].focus(),t.preventDefault()),t.shiftKey&&"Tab"===t.key&&0===e&&(this.modalFocusableElements[this.modalFocusableElements.length-1].focus(),t.preventDefault())}focusToBtn(){this.previusActiveBtn.focus(),this.tabindexOn()}tabindexOn(){this.documentFocusableElements?.map((t=>t?.removeAttribute("tabindex")))}tabindexOff(){this.documentFocusableElements?.map((t=>t?.setAttribute("tabindex","-1"))),this.modalFocusableElements?.map((t=>t?.removeAttribute("tabindex")))}}}()}();